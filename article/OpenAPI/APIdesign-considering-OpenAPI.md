# 全体像兼目次

* OpenAPIとはなんぞや？
* OpenAPISpec（OAS）とはなんぞや？
* Swaggerとはなんぞや？
* スキーマ駆動開発とは何ぞや？
  * 座学
  * 実践
* OpenAPIGenerater
  * 自動生成したコードをつなぎこむ
  * 自動生成による上書きの防ぎ方
  * まとめ

## OpenAPIとはなんぞや？
* APIの仕様、標準フォーマットの一つ
* YAML、JSON形式でAPIのエンドポイントとそのリクエスト/レスポンス構造を定義する
  * 基本的にはコード実装前に定義し、定義ファイルから各APIに合わせたコードを自動生成できる
    * 例えばtypescript用のfetch関数や、Pythonバックエンド用のサーバ処理の定義や引数部分のみ関数定義してくれたりできる
      * ※サーバ処理の方を自動生成してくれている部分は、具体的なロジックは未実装
      * レスポンス関数も基本的にできるのでそこの引数に仕様に合わせたレスポンスを返すロジックメソッドの呼び出し結果などを入れる感じ
      * 完全に全自動というわけではないので注意
* 大きなメリットとして、実装前の段階でフロントエンド、バックエンド側の意思疎通が取りやすく、まとそれによる実装後の認識ずれを防げる
  * 開発スピードと正確性の両方を中長期的に担保できる
  * また個人的にこういったルールを敷くことでAIとの相性も良くなる
    * ルールの定義や確認作業に人間を全振りし、しっかりとレビューができた定義を作ればそれを参照させてAIを突っ走らせられることができる

## OpenAPISpec（OAS）とはなんぞや？
* OpenAPIの仕様のこと

## Swaggerとはなんぞや？
* OASの管理、プレビューできるエディタ、CodegenなどOpenAPIによるスキーマ駆動開発をサポートする機能が豊富なツール

## スキーマ駆動開発とは何ぞや？
* OASに沿ったspecファイルを作成時、リクエス/レスポンスのデータ構造を事前に決めるが、それを優先し実装はそれに基づく進め方のこと

## OpenAPIGenerater
* OASをもとに各クライアント用のコード、各バックエンド用のコードを生成するためのツール
* こちらが有名
  * https://openapi-generator.tech/

## まとめ
* オープンAPIを使ったスキーマ駆動開発をするときに、一つ論点として挙げられるのは、オープンAPIジェネレーターによって作られたコードをGitで管理するかどうかですね。それぞれメリット・デメリットがあって、Gitで管理する場合はシンプルになるし、CI/CDでも走らせやすいです。ただ、CI/CDで走らせるときも、ジェネレーターを使うフローにジョブを組み込めば良いと思います。ただ、毎回オープンAPIジェネレーターをローカルで持ってきたときにやらないといけないことはありますが、個人的には管理しない方がいいなと思っています。というのは、オープンAPIのYAMLとかJSONで管理しているファイルを変更したときに、それに合わせて付随してジェネレーターを使って新しいコードを生成するべきだから、最新化するためですね。管理しない方がいいなと思ってて、っていうのは、だってオープンAPIのYAMLとかJSONで管理してるファイルを変更したときに、それに合わせて付随してジェネレーターを使って新しいコードを生成するべきだから、再進化するためにね。なので、管理しない方がいいかなとは個人的に思いました。

## 記事による補足
* OpenAPI実践入門
  * https://qiita.com/drafts/226e35ebad8808d0a66e/edit
  * 上は下書き中注意